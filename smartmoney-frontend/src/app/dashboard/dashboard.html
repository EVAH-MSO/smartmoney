<div class="dashboard-container">
  <div class="header">
    <h2>Welcome, {{ name }}</h2>
    <button (click)="logout()">Logout</button>
  </div>

  <div class="section">
    <h3>Income Overview</h3>

    <div class="add-form">
      <input
        id="incomeCategory"
        name="incomeCategory"
        [(ngModel)]="newIncome.category"
        placeholder="Category"
        autocomplete="off"
      />
      <input
        id="incomeBudget"
        name="incomeBudget"
        type="number"
        [(ngModel)]="newIncome.budget"
        placeholder="Budget"
        autocomplete="off"
      />
      <input
        id="incomeActual"
        name="incomeActual"
        type="number"
        [(ngModel)]="newIncome.actual"
        placeholder="Actual"
        autocomplete="off"
      />
      <button (click)="addIncome()">Add Income</button>
    </div>

    <div class="stats">
      <div><h4>Total Income</h4><p>${{ totalIncome }}</p></div>
      <div><h4>Budget Utilization</h4><p>{{ incomePercent }}%</p></div>
    </div>

    <canvas id="incomeChart"></canvas>
  </div>

  <div class="section">
    <h3>Expenses Overview</h3>

    <div class="add-form">
      <input
        id="expenseCategory"
        name="expenseCategory"
        [(ngModel)]="newExpense.category"
        placeholder="Category"
        autocomplete="off"
      />
      <input
        id="expenseBudget"
        name="expenseBudget"
        type="number"
        [(ngModel)]="newExpense.budget"
        placeholder="Budget"
        autocomplete="off"
      />
      <input
        id="expenseActual"
        name="expenseActual"
        type="number"
        [(ngModel)]="newExpense.actual"
        placeholder="Actual"
        autocomplete="off"
      />
      <button (click)="addExpense()">Add Expense</button>
    </div>

    <div class="stats">
      <div><h4>Total Expenses</h4><p>${{ totalExpense }}</p></div>
      <div><h4>Budget Utilization</h4><p>{{ expensePercent }}%</p></div>
    </div>

    <canvas id="expenseChart"></canvas>
  </div>
  <!-- Income Table -->
<div class="section">
  <h3>All Incomes</h3>
  <table class="data-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Budget</th>
        <th>Actual</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let income of incomeData; let i = index">
        <td>{{ income.category }}</td>
        <td>${{ income.budget }}</td>
        <td>${{ income.actual }}</td>
        <td>
          <button (click)="deleteIncome(i)">Delete</button>
        </td>
      </tr>
      <tr *ngIf="incomeData.length === 0">
        <td colspan="4">No income records</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Expense Table -->
<div class="section">
  <h3>All Expenses</h3>
  <table class="data-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Budget</th>
        <th>Actual</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let expense of expenseData; let i = index">
        <td>{{ expense.category }}</td>
        <td>${{ expense.budget }}</td>
        <td>${{ expense.actual }}</td>
        <td>
          <button (click)="deleteExpense(i)">Delete</button>
        </td>
      </tr>
      <tr *ngIf="expenseData.length === 0">
        <td colspan="4" >No expense records</td>
      </tr>
    </tbody>
  </table>
</div>

</div>
